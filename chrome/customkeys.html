<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title>SGPvP Custom Keys</title>
  <link rel="stylesheet" type="text/css" href="help.css" />
 </head>
 <body>
  <div id="content">

    <h1>SGPvP Custom Keys</h1>

    <p>This is a technical note for technically-minded users.</p>

    <p>The SGPvP script can be configured to respond to almost any key
    on your keyboard, not only the ones available on the simplified
    QWERTY keyboard of the user interface. To do this, however, you
    have to edit the keymap by hand.</p>

    <h2>The keymap format</h2>

    <p>Use <em>Key bindings</em> &#8594; <em>Import/Export
    keymap</em>.  Notice that the text that gets exported and imported
    is simply an object in
    <a href="http://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a>
    format, where property names are key codes, and values are strings
    in an internal format that won't be documented but isn't hard to
    figure out.</p>

    <p>Formatted for legibility, an exported keymap looks like
    this:</p>

    <pre>{
  "90": "setRetreatPoint",
  "88": "engage,20,m",
  "67": "disengage",
  "86": "nav",
  "66": "bots",
  "78": "testBots",
  "77": "damageBuilding,m",
  "65": "forceBots,1",
  "83": "forceBots,4",
  "68": "forceBots,8",
  "70": "fillTank",
  "75": "cloak",
  "76": "uncloak",
  "84": "testTargeting",
  "73": "configure",
  "81": "flyClose",
  "87": "exitFlyClose",
  "79": "undock",
  "80": "dock"
}</pre>

    <p>The thing to realise is: this object can be edited and imported
    back, and the imported key codes need not be present on the
    simplified keyboard of the user interface. Any such codes won't be
    displayed by the user interface, but they will be listened for,
    and acted upon.</p>

    <h2>Example</h2>

    <p>Suppose you want to bind the action <em>raid 12 rounds without
    missiles</em> to the key <span>F1</span>.</p>

    <p>The first thing you need is a way to determine the key codes of
    the keys on your keyboard.  Try
    <a href="http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes" target="_blank">Cambia
    Research's interactive demostration thingie</a>, or
    <a href="http://whatthekeycode.com/" target="_blank">whatthekeycode.com</a>
    when they get their domain sorted.</p>

    <p>Then you need to figure out SGPvP's internal representation of
    the action you want. As this isn't documented, the best way to go
    about it is to have the script tell you: use the user interface to
    bind this action to a key on the simplified keyboard, and export
    the keymap.</p>

    <p>If you bind the action above to, say, the space bar (key code
    32), and export the keymap, you'll find the following entry in
    it:</p>

    <pre>  "32":"raid,12,n"</pre>

    <p>All you have to do is change the key code to that of the
    <span>F1</span> key (112 on this author's computer).  So you edit
    that bit to read:</p>

    <pre>  "112":"raid,12,n"</pre>

    <p>And then simply import the full keymap. That's it; do this for
    any obscure key you want to use.</p>

    <p>Note: you cannot redefine the <span>Esc</span> key (code 27)
    this way. This key alone is reserved to open and close the
    configuration dialogue.</p>

  </div>
 </body>
</html>
